<!DOCTYPE html>
<html lang="tg">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ёвари зеҳни сунъӣ</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: { primary: "#4F46E5", secondary: "#8B5CF6" },
            borderRadius: {
              none: "0px",
              sm: "4px",
              DEFAULT: "8px",
              md: "12px",
              lg: "16px",
              xl: "20px",
              "2xl": "24px",
              "3xl": "32px",
              full: "9999px",
              button: "8px",
            },
          },
        },
      };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
      rel="stylesheet"
    />
    <style>
      :where([class^="ri-"])::before { content: "\f3c2"; }
      body {
      font-family: 'Roboto', 'Arial', sans-serif;
      height: 100vh;
      overflow: hidden;
      }
      .message-container {
      scrollbar-width: thin;
      }
      .message-container::-webkit-scrollbar {
      width: 6px;
      }
      .message-container::-webkit-scrollbar-thumb {
      background-color: rgba(0, 0, 0, 0.2);
      border-radius: 3px;
      }
      .message-animation {
      animation: fadeIn 0.3s ease-in-out;
      }
      @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
      }
      .typing-indicator span {
      animation: blink 1.4s infinite both;
      }
      .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
      }
      .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
      }
      @keyframes blink {
      0% { opacity: 0.1; }
      20% { opacity: 1; }
      100% { opacity: 0.1; }
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <div class="relative w-[375px] h-[762px] mx-auto bg-white overflow-hidden">
      <!-- Header -->
      <header class="fixed top-0 w-full bg-primary text-white z-10 shadow-md">
        <div class="flex items-center justify-between px-4 py-3">
          <div class="flex items-center gap-3">
            <div
              class="w-10 h-10 flex items-center justify-center bg-white bg-opacity-20 rounded-full"
            >
              <i class="ri-robot-line ri-lg"></i>
            </div>
            <div>
              <h1 class="font-['Pacifico'] text-lg">logo</h1>
              <div class="flex items-center text-xs">
                <span
                  class="inline-block w-2 h-2 bg-green-400 rounded-full mr-1.5"
                ></span>
                <span>Онлайн</span>
              </div>
            </div>
          </div>
          <div class="flex gap-3">
            <button
              class="w-8 h-8 flex items-center justify-center bg-white bg-opacity-20 rounded-full cursor-pointer"
            >
              <i class="ri-information-line"></i>
            </button>
            <button
              class="w-8 h-8 flex items-center justify-center bg-white bg-opacity-20 rounded-full cursor-pointer"
            >
              <i class="ri-settings-3-line"></i>
            </button>
          </div>
        </div>
      </header>
      <!-- Chat area -->
      <div
        class="message-container pt-[72px] pb-[76px] h-full overflow-y-auto px-4"
      >
        <!-- Welcome message -->
        <div class="flex flex-col gap-4 pb-4">
          <div class="flex items-start gap-2 max-w-[85%] message-animation">
            <div
              class="w-8 h-8 flex items-center justify-center bg-primary rounded-full flex-shrink-0 mt-1"
            >
              <i class="ri-robot-line text-white"></i>
            </div>
            <div class="bg-gray-100 p-3 rounded-r-lg rounded-bl-lg">
              <p class="text-sm">
                Салом! Ман ёвари зеҳни сунъӣ бо забони тоҷикӣ ҳастам. Ҳар
                саволе, ки дошта бошед, метавонед аз ман пурсед.
              </p>
              <span class="text-xs text-gray-500 mt-1 block">13:45</span>
            </div>
          </div>
          <!-- Quick action buttons -->
          <div class="flex flex-wrap gap-2 ml-10 message-animation">
            <button
              class="bg-white border border-gray-200 px-3 py-2 rounded-button text-sm hover:bg-gray-50 cursor-pointer"
            >
              Дар бораи Тоҷикистон
            </button>
            <button
              class="bg-white border border-gray-200 px-3 py-2 rounded-button text-sm hover:bg-gray-50 cursor-pointer"
            >
              Таърихи забони тоҷикӣ
            </button>
            <button
              class="bg-white border border-gray-200 px-3 py-2 rounded-button text-sm hover:bg-gray-50 cursor-pointer"
            >
              Тарҷумаи матн
            </button>
          </div>
          <!-- User message example -->
          <div class="flex justify-end message-animation">
            <div
              class="bg-primary text-white p-3 rounded-l-lg rounded-br-lg max-w-[85%]"
            >
              <p class="text-sm">
                Дар бораи таърихи Тоҷикистон маълумот диҳед.
              </p>
              <span class="text-xs text-white text-opacity-70 mt-1 block"
                >13:46</span
              >
            </div>
          </div>
          <!-- Bot response -->
          <div class="flex items-start gap-2 max-w-[85%] message-animation">
            <div
              class="w-8 h-8 flex items-center justify-center bg-primary rounded-full flex-shrink-0 mt-1"
            >
              <i class="ri-robot-line text-white"></i>
            </div>
            <div class="bg-gray-100 p-3 rounded-r-lg rounded-bl-lg">
              <p class="text-sm">
                Тоҷикистон кишвари кӯҳсорест, ки дар Осиёи Марказӣ ҷойгир аст.
                Таърихи он бисёр қадима буда, ба ҳазорсолаҳои пеш аз милод
                бармегардад.
              </p>
              <p class="text-sm mt-2">
                Дар замони қадим, ин минтақа қисми империяҳои бузурги
                Ҳахоманишиҳо, Юнону Бохтар ва Кушониён буд. Дар асрҳои миёна,
                Тоҷикистони имрӯза қисми давлати Сомониён буд, ки яке аз
                давраҳои тиллоии тамаддуни форсу тоҷик ба ҳисоб меравад.
              </p>
              <p class="text-sm mt-2">
                Дар соли 1991, пас аз пошхӯрии Иттиҳоди Шӯравӣ, Тоҷикистон
                истиқлолияти худро эълон кард.
              </p>
              <span class="text-xs text-gray-500 mt-1 block">13:47</span>
            </div>
          </div>
          <!-- User message example 2 -->
          <div class="flex justify-end message-animation">
            <div
              class="bg-primary text-white p-3 rounded-l-lg rounded-br-lg max-w-[85%]"
            >
              <p class="text-sm">
                Забони тоҷикӣ ба кадом оилаи забонҳо тааллуқ дорад?
              </p>
              <span class="text-xs text-white text-opacity-70 mt-1 block"
                >13:48</span
              >
            </div>
          </div>
          <!-- Bot response 2 -->
          <div class="flex items-start gap-2 max-w-[85%] message-animation">
            <div
              class="w-8 h-8 flex items-center justify-center bg-primary rounded-full flex-shrink-0 mt-1"
            >
              <i class="ri-robot-line text-white"></i>
            </div>
            <div class="bg-gray-100 p-3 rounded-r-lg rounded-bl-lg">
              <p class="text-sm">
                Забони тоҷикӣ ба гурӯҳи забонҳои эронии ғарбӣ, шохаи ҷанубу
                ғарбии оилаи забонҳои ҳиндуаврупоӣ тааллуқ дорад. Он бо забонҳои
                форсӣ (дарӣ) ва дарии Афғонистон хеле наздик аст ва ҳамаи онҳо
                шаклҳои гуногуни як забон ҳисобида мешаванд.
              </p>
              <p class="text-sm mt-2">
                Забони тоҷикӣ дорои таърихи бой буда, аз забони форсии миёна
                (паҳлавӣ) сарчашма гирифтааст ва дар тӯли асрҳо инкишоф ёфтааст.
              </p>
              <span class="text-xs text-gray-500 mt-1 block">13:49</span>
            </div>
          </div>
        </div>
      </div>
      <!-- Input area -->
      <div class="fixed bottom-0 w-full bg-white border-t border-gray-200 p-3">
        <div class="flex items-center gap-2">
          <button
            class="w-10 h-10 flex items-center justify-center bg-gray-100 rounded-full cursor-pointer"
          >
            <i class="ri-mic-line ri-lg text-gray-600"></i>
          </button>
          <div class="flex-1 relative">
            <input
              type="text"
              placeholder="Паёми худро нависед..."
              class="w-full border border-gray-200 rounded-button py-2.5 px-4 pr-10 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent text-sm"
            />
            <button
              class="absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 flex items-center justify-center text-gray-400 cursor-pointer"
            >
              <i class="ri-emotion-line ri-lg"></i>
            </button>
          </div>
          <button
            id="sendButton"
            class="w-10 h-10 flex items-center justify-center bg-primary rounded-full text-white cursor-pointer"
          >
            <i class="ri-send-plane-fill ri-lg"></i>
          </button>
        </div>
      </div>
      <!-- Tab bar -->
      <div
        class="fixed bottom-0 w-full bg-white border-t border-gray-200 hidden"
      >
        <div class="grid grid-cols-4 h-[60px]">
          <a
            href="#"
            class="flex flex-col items-center justify-center cursor-pointer"
          >
            <div class="w-6 h-6 flex items-center justify-center">
              <i class="ri-chat-3-line ri-lg text-primary"></i>
            </div>
            <span class="text-xs text-primary mt-1">Чат</span>
          </a>
          <a
            href="#"
            class="flex flex-col items-center justify-center cursor-pointer"
          >
            <div class="w-6 h-6 flex items-center justify-center">
              <i class="ri-translate-2-line ri-lg text-gray-500"></i>
            </div>
            <span class="text-xs text-gray-500 mt-1">Тарҷума</span>
          </a>
          <a
            href="#"
            class="flex flex-col items-center justify-center cursor-pointer"
          >
            <div class="w-6 h-6 flex items-center justify-center">
              <i class="ri-book-open-line ri-lg text-gray-500"></i>
            </div>
            <span class="text-xs text-gray-500 mt-1">Омӯзиш</span>
          </a>
          <a
            href="#"
            class="flex flex-col items-center justify-center cursor-pointer"
          >
            <div class="w-6 h-6 flex items-center justify-center">
              <i class="ri-user-line ri-lg text-gray-500"></i>
            </div>
            <span class="text-xs text-gray-500 mt-1">Профил</span>
          </a>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const messageContainer = document.querySelector(".message-container");
        const input = document.querySelector("input");
        const sendButton = document.getElementById("sendButton");
        // Scroll to bottom initially
        messageContainer.scrollTop = messageContainer.scrollHeight;
        function addMessage(text, isUser = false) {
          const currentTime = new Date();
          const hours = currentTime.getHours().toString().padStart(2, "0");
          const minutes = currentTime.getMinutes().toString().padStart(2, "0");
          const timeString = `${hours}:${minutes}`;
          const messageDiv = document.createElement("div");
          messageDiv.classList.add("message-animation");
          if (isUser) {
            messageDiv.classList.add("flex", "justify-end", "mb-4");
            messageDiv.innerHTML = `
      <div class="bg-primary text-white p-3 rounded-l-lg rounded-br-lg max-w-[85%]">
      <p class="text-sm">${text}</p>
      <span class="text-xs text-white text-opacity-70 mt-1 block">${timeString}</span>
      </div>
      `;
          } else {
            messageDiv.classList.add(
              "flex",
              "items-start",
              "gap-2",
              "max-w-[85%]",
              "mb-4",
            );
            messageDiv.innerHTML = `
      <div class="w-8 h-8 flex items-center justify-center bg-primary rounded-full flex-shrink-0 mt-1">
      <i class="ri-robot-line text-white"></i>
      </div>
      <div class="bg-gray-100 p-3 rounded-r-lg rounded-bl-lg">
      <p class="text-sm">${text}</p>
      <span class="text-xs text-gray-500 mt-1 block">${timeString}</span>
      </div>
      `;
          }
          messageContainer.appendChild(messageDiv);
          messageContainer.scrollTop = messageContainer.scrollHeight;
        }
        function addTypingIndicator() {
          const typingDiv = document.createElement("div");
          typingDiv.classList.add(
            "flex",
            "items-start",
            "gap-2",
            "max-w-[85%]",
            "mb-4",
            "typing-indicator-container",
          );
          typingDiv.innerHTML = `
      <div class="w-8 h-8 flex items-center justify-center bg-primary rounded-full flex-shrink-0 mt-1">
      <i class="ri-robot-line text-white"></i>
      </div>
      <div class="bg-gray-100 p-3 rounded-r-lg rounded-bl-lg">
      <div class="typing-indicator flex">
      <span class="w-2 h-2 bg-gray-500 rounded-full mx-0.5"></span>
      <span class="w-2 h-2 bg-gray-500 rounded-full mx-0.5"></span>
      <span class="w-2 h-2 bg-gray-500 rounded-full mx-0.5"></span>
      </div>
      </div>
      `;
          messageContainer.appendChild(typingDiv);
          messageContainer.scrollTop = messageContainer.scrollHeight;
          return typingDiv;
        }
        function removeTypingIndicator() {
          const typingIndicator = document.querySelector(
            ".typing-indicator-container",
          );
          if (typingIndicator) {
            typingIndicator.remove();
          }
        }
        async function getBotResponse(userMessage) {
          try {
            const response = await fetch(
              "https://api.openai.com/v1/chat/completions",
              {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                  Authorization:
                    "Bearer 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",
                },
                body: JSON.stringify({
                  model: "gpt-3.5-turbo",
                  messages: [
                    {
                      role: "system",
                      content:
                        "You are a helpful assistant that responds in Tajik language. Always respond in Tajik language regardless of the input language.",
                    },
                    {
                      role: "user",
                      content: userMessage,
                    },
                  ],
                  temperature: 0.7,
                }),
              },
            );
            const data = await response.json();
            return data.choices[0].message.content;
          } catch (error) {
            return "Бубахшед, хатогӣ рух дод. Лутфан дубора кӯшиш кунед.";
          }
        }
        async function handleSendMessage() {
          const messageText = input.value.trim();
          if (messageText) {
            addMessage(messageText, true);
            input.value = "";
            const typingIndicator = addTypingIndicator();

            try {
              const botResponse = await getBotResponse(messageText);
              removeTypingIndicator();
              addMessage(botResponse, false);
            } catch (error) {
              removeTypingIndicator();
              addMessage(
                "Бубахшед, хатогӣ рух дод. Лутфан дубора кӯшиш кунед.",
                false,
              );
            }
          }
        }
        // Send message on button click
        sendButton.addEventListener("click", handleSendMessage);
        // Send message on Enter key
        input.addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            handleSendMessage();
          }
        });
      });
    </script>
  </body>
</html>
